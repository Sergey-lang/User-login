{"version":3,"sources":["u-4-components/LoginForm/LoginForm.module.scss","u-3-pages/UserPage/UserPage.module.scss","u-4-components/Input/SuperInputText.module.scss","u-4-components/Button/SuperButton.module.scss","u-4-components/Error/Error.module.scss","u-4-components/Preloader/Preloader.module.css","u-1-app/App.module.scss","u-3-pages/LoginPage/LoginPage.module.scss","reportWebVitals.ts","u-3-pages/UserPage/selectors.ts","u-4-components/Input/SuperInputText.tsx","u-4-components/Button/SuperButton.tsx","u-4-components/LoginForm/LoginForm.tsx","u-1-app/app-reducer.ts","u-2-api/api.ts","u-2-api/auth-api.ts","u-3-pages/LoginPage/auth-reducer.ts","u-4-components/Error/Error.tsx","u-4-components/Preloader/Preloader.tsx","u-3-pages/LoginPage/LoginPage.tsx","u-3-pages/UserPage/UserPage.tsx","u-1-app/App.tsx","u-1-app/store.ts","index.tsx"],"names":["module","exports","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","selectorUserData","state","authState","user","selectorIsLogged","isLoggedIn","selectorRequestStatus","appState","status","selectorAppError","error","SuperInputText","type","onChange","onChangeText","onKeyPress","onEnter","className","spanClassName","restProps","finalInputClassName","s","superInput","finalSpanClassName","spanError","input_wrapper","e","currentTarget","value","key","SuperButton","red","finalClassName","default","validate","values","errors","clientId","toString","length","email","test","password","LoginForm","callback","formik","useFormik","initialValues","onSubmit","setSubmitting","renderInput","id","name","placeholder","form_wrapper","headline","headline_text","form","form_description","handleSubmit","input","handleChange","form_btn_wrapper","form_btn","initializeState","setAppStatus","setAppError","axiosInstance","axios","create","withCredentials","baseURL","headers","Accept","interceptorsConfig","config","token","localStorage","getItem","Boolean","Authorization","interceptors","request","use","authAPI","post","res","get","setIsLoggedIn","getAuthUserData","dispatch","a","data","message","Error","error_wrapper","Preloader","preloader_wrapper","loader","LoginPage","useSelector","useDispatch","to","wrapper","setItem","accessToken","refreshToken","login","UserPage","useEffect","user_block","user_info","info","logout_btn_wrapper","onClick","removeItem","logout_btn","PATH","LOGIN","USER","App","app","content","path","exact","render","rootReducer","combineReducers","action","store","createStore","applyMiddleware","thunkMiddleware","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.9df54643.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"form_wrapper\":\"LoginForm_form_wrapper__2zl6s\",\"headline\":\"LoginForm_headline__6kSp3\",\"headline_text\":\"LoginForm_headline_text__3dILg\",\"form\":\"LoginForm_form__1pcpS\",\"form_description\":\"LoginForm_form_description__25Ynl\",\"input\":\"LoginForm_input__3kL8k\",\"form_btn_wrapper\":\"LoginForm_form_btn_wrapper__KVwxh\",\"form_btn\":\"LoginForm_form_btn__oVNS4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"UserPage_wrapper__2mid2\",\"user_block\":\"UserPage_user_block__33E_F\",\"user_info\":\"UserPage_user_info__z4mtE\",\"info\":\"UserPage_info___jNbQ\",\"logout_btn_wrapper\":\"UserPage_logout_btn_wrapper__3p3nK\",\"logout_btn\":\"UserPage_logout_btn__3xjIW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input_wrapper\":\"SuperInputText_input_wrapper__ftabx\",\"superInput\":\"SuperInputText_superInput__3bEi9\",\"spanError\":\"SuperInputText_spanError__V3U3V\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"default\":\"SuperButton_default__piyhT\",\"red\":\"SuperButton_red__2o26d\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"error_wrapper\":\"Error_error_wrapper__2kbCL\",\"error\":\"Error_error__J1ji_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"preloader_wrapper\":\"Preloader_preloader_wrapper__H0b0v\",\"loader\":\"Preloader_loader__2bGH8\",\"load1\":\"Preloader_load1__3Uu_k\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__3QElB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"LoginPage_wrapper__2VfTR\",\"headline\":\"LoginPage_headline__l8_P7\"};","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {AppStateType} from '../../u-1-app/store';\r\n\r\nexport const selectorUserData= (state: AppStateType) => state.authState.user\r\nexport const selectorIsLogged = (state: AppStateType) => state.authState.isLoggedIn\r\nexport const selectorRequestStatus= (state: AppStateType) => state.appState.status\r\nexport const selectorAppError= (state: AppStateType) => state.appState.error\r\n","import React, {ChangeEvent, DetailedHTMLProps, InputHTMLAttributes, KeyboardEvent} from 'react'\r\nimport s from './SuperInputText.module.scss'\r\n\r\ntype DefaultInputPropsType = DetailedHTMLProps<InputHTMLAttributes<HTMLInputElement>, HTMLInputElement>;\r\n\r\ntype SuperInputTextPropsType = DefaultInputPropsType & {\r\n    onChangeText?: (value: string) => void\r\n    onEnter?: () => void\r\n    error?: string\r\n    spanClassName?: string\r\n};\r\n\r\nconst SuperInputText: React.FC<SuperInputTextPropsType> = (\r\n    {\r\n        type,\r\n        onChange, onChangeText,\r\n        onKeyPress, onEnter,\r\n        error,\r\n        className, spanClassName,\r\n\r\n        ...restProps\r\n    }\r\n) => {\r\n    const onChangeCallback = (e: ChangeEvent<HTMLInputElement>) => {\r\n        onChange\r\n        && onChange(e)\r\n\r\n        onChangeText && onChangeText(e.currentTarget.value)\r\n    }\r\n    const onKeyPressCallback = (e: KeyboardEvent<HTMLInputElement>) => {\r\n        onKeyPress && onKeyPress(e)\r\n\r\n        e.key === 'Enter'\r\n        && onEnter\r\n        && onEnter()\r\n    }\r\n\r\n    const finalInputClassName = className ? `${s.superInput} ${className}` : s.superInput\r\n    const finalSpanClassName =  spanClassName? `${s.spanError} ${spanClassName}` : s.spanError\r\n\r\n    return (\r\n\r\n        <div className={s.input_wrapper}>\r\n            <input type={'text'}\r\n                   onChange={onChangeCallback}\r\n                   onKeyPress={onKeyPressCallback}\r\n                   className={finalInputClassName}\r\n\r\n                   {...restProps}\r\n            />\r\n            {error && <span className={finalSpanClassName}>{error}</span>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SuperInputText\r\n","import React, {ButtonHTMLAttributes, DetailedHTMLProps} from 'react';\r\nimport s from './SuperButton.module.scss';\r\n\r\ntype DefaultButtonPropsType = DetailedHTMLProps<ButtonHTMLAttributes<HTMLButtonElement>, HTMLButtonElement>;\r\n\r\ntype SuperButtonPropsType = DefaultButtonPropsType & {\r\n    red?: boolean\r\n}\r\n\r\nconst SuperButton: React.FC<SuperButtonPropsType> = (\r\n    {\r\n        red, className,\r\n        ...restProps\r\n    }\r\n) => {\r\n    const finalClassName = red ? `${s.red} ${s.default}` : `${className} ${s.default}`;\r\n\r\n    return (\r\n        <button className={finalClassName}\r\n                {...restProps}\r\n        />\r\n    );\r\n}\r\n\r\nexport default SuperButton;\r\n","import React, {ChangeEvent} from 'react';\r\nimport {FormikErrors, useFormik} from 'formik';\r\nimport SuperInputText from '../Input/SuperInputText';\r\nimport SuperButton from '../Button/SuperButton';\r\n\r\nimport s from './LoginForm.module.scss'\r\n\r\nexport interface FormValues {\r\n    clientId: number,\r\n    email: string,\r\n    password: string,\r\n}\r\n\r\ninterface OtherProps {\r\n    callback: (value: FormValues) => void\r\n}\r\n\r\nconst validate = (values: FormValues) => {\r\n    let errors: FormikErrors<FormValues> = {};\r\n\r\n    if (!values.clientId) {\r\n        errors.clientId = 'Required';\r\n    } else if (values.clientId.toString().length === 0) {\r\n        errors.clientId = 'Must be 1 characters or more';\r\n    } else if (values.clientId.toString().length > 5) {\r\n        errors.clientId = 'Must be 10 characters or less';\r\n    }\r\n\r\n    if (!values.email) {\r\n        errors.email = 'Required';\r\n    } else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(values.email)) {\r\n        errors.email = 'Invalid email address';\r\n    }\r\n\r\n    if (!values.password) {\r\n        errors.password = 'Required';\r\n    } else if (values.password.length < 4) {\r\n        errors.password = 'Must be 4 characters or more';\r\n    } else if (values.password.length > 10) {\r\n        errors.password = 'Must be 10 characters or less';\r\n    }\r\n\r\n    return errors;\r\n}\r\n\r\nexport const LoginForm: React.FC<OtherProps> = ({callback}) => {\r\n\r\n    const formik = useFormik({\r\n        initialValues: {\r\n            clientId: 1,\r\n            email: 'user@ozitag.com',\r\n            password: 'user',\r\n        },\r\n        validate,\r\n        onSubmit: (values, {setSubmitting}) => {\r\n            callback(values)\r\n            setSubmitting(false)\r\n        },\r\n    });\r\n\r\n    const renderInput = (id: string, name: string, type: string, className: string, error: string | undefined, onChange: (e: ChangeEvent) => void, value: number | string, placeholder?: string) => {\r\n        return <SuperInputText id={id}\r\n                               name={name}\r\n                               type={type}\r\n                               className={className}\r\n                               error={error}\r\n                               onChange={onChange}\r\n                               value={value}\r\n                               placeholder={placeholder}\r\n        />\r\n    }\r\n\r\n    return (\r\n        <div className={s.form_wrapper}>\r\n            <div className={s.headline}>\r\n                <h1 className={s.headline_text}>FLy&TAG</h1>\r\n            </div>\r\n            <div className={s.form}>\r\n                <p className={s.form_description}>Login into your account</p>\r\n                <form onSubmit={formik.handleSubmit}>\r\n\r\n                    {renderInput('clientId', 'clientId', 'text', s.input, formik.errors.clientId, formik.handleChange, formik.values.clientId, 'Enter ID')}\r\n\r\n                    {renderInput('email', 'email', 'text', s.input, formik.errors.email, formik.handleChange, formik.values.email, 'Enter Email')}\r\n\r\n                    {renderInput('password', 'password', 'text', s.input, formik.errors.password, formik.handleChange, formik.values.password, 'Enter Password')}\r\n\r\n                    <div className={s.form_btn_wrapper}>\r\n                        <SuperButton type=\"submit\" className={s.form_btn}>Log in</SuperButton>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n\r\n\r\n\r\n","type ActionsType = ReturnType<typeof setAppStatus>\r\n    | ReturnType<typeof setAppError>\r\n    | ReturnType<typeof setAppStatus>\r\n\r\nexport type RequestStatusType = 'idle' | 'loading' | 'succeeded' | 'failed'\r\nlet initializeState = {\r\n    status: 'idle',\r\n    error: null,\r\n} as InitialStateType\r\n\r\nexport type InitialStateType = {\r\n    status: RequestStatusType\r\n    error: string | null\r\n}\r\n\r\nexport const appReducer = (state: InitialStateType = initializeState, action: ActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'SP/APP/SET_STATUS':\r\n            return {...state, status: action.status}\r\n        case 'SP/APP/SET_ERROR':\r\n            return {...state, error: action.error}\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport const setAppStatus = (status: RequestStatusType) => ({type: 'SP/APP/SET_STATUS', status} as const)\r\nexport const setAppError = (error: string | null) => ({type: 'SP/APP/SET_ERROR', error} as const)\r\n","import axios from 'axios'\r\n\r\nconst defaultOptions = {\r\n    withCredentials: false,\r\n    baseURL: 'https://tager.dev.ozitag.com',\r\n    headers: {\r\n        Accept: 'application/json',\r\n    }\r\n};\r\n\r\nexport const axiosInstance = axios.create(defaultOptions);\r\n\r\nconst interceptorConfigCreator = () => (config: any) => {\r\n    const token = localStorage.getItem('accessToken')\r\n    if (Boolean(token)) {\r\n        config.headers.Authorization = `Bearer ${token}`\r\n    } else {\r\n        delete config.headers.Authorization\r\n    }\r\n    return config\r\n}\r\n\r\nconst interceptorsConfig = interceptorConfigCreator()\r\naxiosInstance.interceptors.request.use(interceptorsConfig)\r\n","import {axiosInstance} from './api';\r\nimport {AxiosResponse} from 'axios';\r\nimport {UserType} from '../u-3-pages/LoginPage/auth-reducer';\r\n\r\ntype LoginResponseType = {\r\n    tokenType: string,\r\n    expiresAt: string,\r\n    accessToken: string,\r\n    refreshToken: string\r\n}\r\n\r\nexport const authAPI = {\r\n    login(clientId: number, email: string, password: string) {\r\n        return axiosInstance.post<AxiosResponse<LoginResponseType>>(`/api/auth/user`, {clientId, email, password})\r\n            .then(res => res)\r\n    },\r\n    logout() {\r\n        return axiosInstance.post<{ success: boolean }>(`/api/tager/user/profile/logout`)\r\n            .then(res => res)\r\n    },\r\n    getUser() {\r\n        return axiosInstance.get<AxiosResponse<UserType>>(`/api/tager/user/profile`)\r\n            .then(res => res)\r\n    },\r\n}\r\n","import {ThunkDispatch} from 'redux-thunk';\r\nimport {setAppError, setAppStatus} from '../../u-1-app/app-reducer';\r\nimport {authAPI} from '../../u-2-api/auth-api';\r\nimport {AppStateType} from '../../u-1-app/store';\r\n\r\nexport type UserType = {\r\n    name: string,\r\n    email: string,\r\n}\r\n\r\ntype ActionsType = ReturnType<typeof setAppStatus>\r\n    | ReturnType<typeof setIsLoggedIn>\r\n    | ReturnType<typeof setUserData>\r\n    | ReturnType<typeof setAppError>\r\n\r\nlet initializeState = {\r\n    isLoggedIn: false,\r\n    user: {} as UserType\r\n};\r\n\r\nexport type InitialStateType = typeof initializeState\r\nexport const authReducer = (state: InitialStateType = initializeState, action: ActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'SP/AUTH/SET_IS_LOGGED':\r\n            return {...state, isLoggedIn: action.value}\r\n        case 'SP/AUTH/SET_USER_DATA':\r\n            return {...state, user: action.user}\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport const setIsLoggedIn = (value: boolean) => ({type: 'SP/AUTH/SET_IS_LOGGED', value} as const)\r\nexport const setUserData = (user: UserType) => ({type: 'SP/AUTH/SET_USER_DATA', user} as const)\r\n\r\nexport const getAuthUserData = () => async (dispatch: ThunkDispatch<AppStateType, unknown, ActionsType>) => {\r\n    dispatch(setAppStatus('loading'))\r\n    try {\r\n        const res = await authAPI.getUser()\r\n        if (res.status === 200) {\r\n            dispatch(setUserData(res.data.data));\r\n            dispatch(setIsLoggedIn(true));\r\n            dispatch(setAppStatus('succeeded'));\r\n        } else {\r\n            dispatch(setAppStatus('failed'));\r\n        }\r\n    } catch (e) {\r\n        dispatch(setAppError(e.message))\r\n        dispatch(setAppStatus('failed'));\r\n    }\r\n};\r\n\r\nexport const login = (clientId: number, email: string, password: string) =>\r\n    async (dispatch: ThunkDispatch<AppStateType, unknown, ActionsType>) => {\r\n        dispatch(setAppStatus('loading'))\r\n        try {\r\n            const res = await authAPI.login(clientId, email, password)\r\n            if (res.status === 200) {\r\n                localStorage.setItem('accessToken', res.data.data.accessToken);\r\n                localStorage.setItem('refreshToken', res.data.data.refreshToken);\r\n                await dispatch(getAuthUserData());\r\n                dispatch(setIsLoggedIn(true));\r\n                dispatch(setAppError(''));\r\n                return\r\n            } else {\r\n                dispatch(setAppStatus('failed'));\r\n                return\r\n            }\r\n        } catch (e) {\r\n            dispatch(setAppError(e.message))\r\n            dispatch(setAppStatus('failed'));\r\n        }\r\n    };\r\n\r\nexport const logout = () => async (dispatch: ThunkDispatch<AppStateType, unknown, ActionsType>) => {\r\n    dispatch(setAppStatus('loading'))\r\n    try {\r\n        const res = await authAPI.logout()\r\n        if (res.status === 200) {\r\n            localStorage.removeItem('accessToken')\r\n            localStorage.removeItem('refreshToken')\r\n            dispatch(setIsLoggedIn(false))\r\n            dispatch(setAppError(''))\r\n            dispatch(setAppStatus('succeeded'));\r\n        }\r\n    } catch (e) {\r\n        dispatch(setAppError(e.message))\r\n        dispatch(setAppStatus('failed'));\r\n    }\r\n}\r\n\r\n","import React from 'react';\r\nimport s from './Error.module.scss'\r\n\r\ntype PropsType = {\r\n    error: string\r\n}\r\n\r\nconst Error: React.FC<PropsType> = ({error}) => {\r\n    return (\r\n        <div className={s.error_wrapper}>\r\n            <div className={s.error}>{error ? error : ''}</div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Error;\r\n","import React from 'react';\r\nimport s from './Preloader.module.css';\r\n\r\nconst Preloader: React.FC = () => {\r\n    return (\r\n        <div className={s.preloader_wrapper}>\r\n            <div className={s.loader}>Loading...</div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Preloader;\r\n","import React from 'react';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport {selectorAppError, selectorIsLogged, selectorRequestStatus} from '../UserPage/selectors';\r\nimport {FormValues, LoginForm} from '../../u-4-components/LoginForm/LoginForm';\r\nimport {Redirect} from 'react-router-dom';\r\nimport {login} from './auth-reducer';\r\nimport Error from '../../u-4-components/Error/Error';\r\nimport Preloader from '../../u-4-components/Preloader/Preloader';\r\n\r\nimport s from './LoginPage.module.scss'\r\n\r\nexport const LoginPage: React.FC = () => {\r\n    const status = useSelector(selectorRequestStatus)\r\n    const error = useSelector(selectorAppError)\r\n    const isLoggedIn = useSelector(selectorIsLogged)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const sentLoginData = (value: FormValues) => {\r\n        let {clientId, email, password} = value\r\n        dispatch(login(clientId, email, password))\r\n    }\r\n\r\n    if (isLoggedIn) {\r\n        return <Redirect to={'/'}/>\r\n    }\r\n\r\n    return (\r\n        <div className={s.wrapper}>\r\n            {status === 'loading'\r\n                ? <Preloader/>\r\n                : <>\r\n                    <LoginForm callback={sentLoginData}/>\r\n                    {error && <Error error={error}/>}\r\n                </>\r\n            }\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\n\r\n\r\n","import React, {useEffect} from 'react';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {getAuthUserData, logout} from '../LoginPage/auth-reducer';\nimport {selectorAppError, selectorIsLogged, selectorRequestStatus, selectorUserData} from './selectors';\nimport SuperButton from '../../u-4-components/Button/SuperButton';\nimport Preloader from '../../u-4-components/Preloader/Preloader';\nimport Error from '../../u-4-components/Error/Error';\nimport {Redirect} from 'react-router-dom';\nimport {PATH} from '../../u-1-app/App';\n\nimport s from './UserPage.module.scss'\n\nexport const UserPage: React.FC = () => {\n    const {email, name} = useSelector(selectorUserData)\n    const status = useSelector(selectorRequestStatus)\n    const error = useSelector(selectorAppError)\n    const isLoggedIn = useSelector(selectorIsLogged)\n\n    const logoutHandler = () => {\n        dispatch(logout())\n    }\n\n    const dispatch = useDispatch()\n    useEffect(() => {\n        if (isLoggedIn)\n            dispatch(getAuthUserData())\n    }, [isLoggedIn, dispatch]);\n\n    if (!isLoggedIn) {\n        return <Redirect to={PATH.LOGIN}/>\n    }\n\n    return (\n        <div className={s.wrapper}>\n            {status === 'loading'\n                ? <Preloader/>\n                : <div className={s.user_block}>\n                    <div className={s.user_info}>\n                        <div className={s.info}>{email}</div>\n                        <div className={s.info}>{name}</div>\n                    </div>\n                    {\n                        isLoggedIn && (\n                            <div className={s.logout_btn_wrapper}>\n                                <SuperButton onClick={logoutHandler} className={s.logout_btn}>LOGOUT</SuperButton>\n                            </div>)\n                    }\n                    {error && <Error error={error}/>}\n                </div>\n            }\n        </div>\n    );\n}\n\n","import React, {useEffect} from 'react';\nimport {Redirect, Route, Switch} from 'react-router-dom';\nimport {LoginPage} from '../u-3-pages/LoginPage/LoginPage';\nimport {UserPage} from '../u-3-pages/UserPage/UserPage';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {selectorIsLogged} from '../u-3-pages/UserPage/selectors';\nimport {setIsLoggedIn} from '../u-3-pages/LoginPage/auth-reducer';\n\nimport s from './App.module.scss'\n\nexport const PATH = {\n    LOGIN: '/login',\n    USER: '/user',\n}\n\nexport const App: React.FC = () => {\n    const isLoggedIn = useSelector(selectorIsLogged)\n\n    const dispatch = useDispatch()\n    useEffect(() => {\n        if (localStorage.getItem('accessToken')) {\n            dispatch(setIsLoggedIn(true))\n        }\n    }, [isLoggedIn,dispatch])\n\n    return (\n        <div className={s.app}>\n            <div className={s.content}>\n                <Switch>\n                    <Route path=\"/\" exact render={() => <Redirect to={PATH.USER}/>}/>\n                    <Route path={PATH.LOGIN} exact render={() => <LoginPage/>}/>\n                    <Route path={PATH.USER} exact render={() => <UserPage/>}/>\n                </Switch>\n            </div>\n        </div>\n    );\n}\n","import {applyMiddleware, combineReducers, createStore} from 'redux'\r\nimport thunkMiddleware from 'redux-thunk'\r\nimport {appReducer} from './app-reducer';\r\nimport {authReducer} from '../u-3-pages/LoginPage/auth-reducer';\r\n\r\nexport const rootReducer = combineReducers({\r\n    appState: appReducer,\r\n    authState: authReducer,\r\n})\r\n\r\nexport type AppStateType = ReturnType<typeof rootReducer>\r\nexport let store = createStore(rootReducer, applyMiddleware(thunkMiddleware))\r\n\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport reportWebVitals from './reportWebVitals';\nimport {App} from './u-1-app/App';\nimport {HashRouter} from 'react-router-dom';\nimport {Provider} from 'react-redux';\nimport {store} from './u-1-app/store';\n\nimport './index.css';\n\nReactDOM.render(\n    <HashRouter>\n        <Provider store={store}>\n            <App/>\n        </Provider>\n    </HashRouter>,\n    document.getElementById('root')\n);\n\nreportWebVitals();\n"],"sourceRoot":""}