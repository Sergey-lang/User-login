(this.webpackJsonpuser_login=this.webpackJsonpuser_login||[]).push([[0],{15:function(e,t,r){e.exports={form_wrapper:"LoginForm_form_wrapper__2zl6s",header:"LoginForm_header__jC63n",form:"LoginForm_form__1pcpS",input:"LoginForm_input__3kL8k",form_btn_wrapper:"LoginForm_form_btn_wrapper__KVwxh",form_btn:"LoginForm_form_btn__oVNS4",input_label:"LoginForm_input_label__13BOd"}},17:function(e,t,r){e.exports={wrapper:"UserPage_wrapper__2mid2",use_block:"UserPage_use_block__7HN15",user_info:"UserPage_user_info__z4mtE",info:"UserPage_info___jNbQ",logout_btn_wrapper:"UserPage_logout_btn_wrapper__3p3nK",logout_btn:"UserPage_logout_btn__3xjIW"}},22:function(e,t,r){e.exports={input_wrapper:"SuperInputText_input_wrapper__3c1LH",superInput:"SuperInputText_superInput__3Hv_Z",errorInput:"SuperInputText_errorInput__1Vdvd",error:"SuperInputText_error__3VwaK",red:"SuperInputText_red__2rpZx"}},29:function(e,t,r){e.exports={default:"SuperButton_default__jvmih",red:"SuperButton_red__Vh0YM"}},34:function(e,t,r){e.exports={preloader_wrapper:"Preloader_preloader_wrapper__H0b0v",loader:"Preloader_loader__2bGH8",load1:"Preloader_load1__3Uu_k"}},37:function(e,t,r){e.exports={app:"App_app__3QElB"}},50:function(e,t,r){e.exports={wrapper:"LoginPage_wrapper__1HQt-",headline:"LoginPage_headline__2a2ob"}},81:function(e,t,r){},82:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(24),c=r.n(a),s=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,83)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),c(e),s(e)}))},o=r(3),i=r(7),u=function(e){return e.authState.user},l=function(e){return e.authState.isLoggedIn},p=function(e){return e.app.status},d=r(52),_=r(5),b=r(28),j=r(22),f=r.n(j),h=r(1),m=function(e){e.type;var t=e.onChange,r=e.onChangeText,n=e.onKeyPress,a=e.onEnter,c=e.error,s=e.className,o=e.spanClassName,i=Object(b.a)(e,["type","onChange","onChangeText","onKeyPress","onEnter","error","className","spanClassName"]),u=c?"".concat(c," ").concat(f.a.superInput," "):f.a.superInput,l="".concat(f.a.error," ").concat(o||"");return Object(h.jsxs)("div",{className:f.a.input_wrapper,children:[Object(h.jsx)("input",Object(_.a)({type:"text",onChange:function(e){t&&t(e),r&&r(e.currentTarget.value)},onKeyPress:function(e){n&&n(e),"Enter"===e.key&&a&&a()},className:"".concat(u," ").concat(s)},i)),c&&Object(h.jsx)("span",{className:l,children:c})]})},O=r(29),g=r.n(O),x=function(e){var t=e.red,r=e.className,n=Object(b.a)(e,["red","className"]),a=t?"".concat(g.a.red," ").concat(g.a.default):"".concat(r," ").concat(g.a.default);return Object(h.jsx)("button",Object(_.a)({className:a},n))},v=r(15),S=r.n(v),w=function(e){var t={};return e.clientId?0===e.clientId.toString().length?t.clientId="Must be 1 characters or more":e.clientId.toString().length>5&&(t.clientId="Must be 10 characters or less"):t.clientId="Required",e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password?e.password.length<4?t.password="Must be 4 characters or more":e.password.length>10&&(t.password="Must be 10 characters or less"):t.password="Required",t},I=function(e){var t=e.callback,r=Object(d.a)({initialValues:{clientId:1,email:"user@ozitag.com",password:"user"},validate:w,onSubmit:function(e,r){var n=r.setSubmitting;t(e),n(!1)}}),n=function(e,t,r,n,a,c,s,o){return Object(h.jsx)(m,{id:e,name:t,type:r,className:n,error:a,onChange:c,value:s,placeholder:o})};return Object(h.jsxs)("div",{className:S.a.form_wrapper,children:[Object(h.jsx)("div",{className:S.a.header,children:Object(h.jsx)("h1",{children:"FLy&TAG"})}),Object(h.jsxs)("div",{className:S.a.form,children:[Object(h.jsx)("p",{children:"Login into your account"}),Object(h.jsxs)("form",{onSubmit:r.handleSubmit,children:[n("clientId","clientId","text",S.a.input,r.errors.clientId,r.handleChange,r.values.clientId,"Enter ID"),n("email","email","text",S.a.input,r.errors.email,r.handleChange,r.values.email,"Enter Email"),n("password","password","text",S.a.input,r.errors.password,r.handleChange,r.values.password,"Enter Password"),Object(h.jsx)("div",{className:S.a.form_btn_wrapper,children:Object(h.jsx)(x,{type:"submit",className:S.a.form_btn,children:"Log in"})})]})]})]})},T=r(18),N=r.n(T),P=r(30),E={status:"idle",error:null,isInitialized:!1},L=function(e){return{type:"SP/APP/SET_STATUS",status:e}},k=r(49),A=r.n(k).a.create({withCredentials:!1,baseURL:"https://tager.dev.ozitag.com",headers:{Accept:"application/json"}}),y=function(e){var t=localStorage.getItem("accessToken");return Boolean(t)?e.headers.Authorization="Bearer ".concat(t):delete e.headers.Authorization,e};A.interceptors.request.use(y);var U=function(e,t,r){return A.post("/api/auth/user",{clientId:e,email:t,password:r}).then((function(e){return e}))},C=function(){return A.post("/api/tager/user/profile/logout").then((function(e){return e}))},F=function(){return A.get("/api/tager/user/profile").then((function(e){return e}))},R={isLoggedIn:!1,user:{}},G=function(e){return{type:"SP/AUTH/SET_IS_LOGGED",value:e}},H=function(){return function(){var e=Object(P.a)(N.a.mark((function e(t){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(L("loading")),e.prev=1,e.next=4,F();case 4:200===(r=e.sent).status?(t({type:"SP/AUTH/SET_USER_DATA",user:r.data.data}),t(G(!0)),t(L("succeeded"))):t(L("failed")),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},z=r(34),B=r.n(z),D=function(){return Object(h.jsx)("div",{className:B.a.preloader_wrapper,children:Object(h.jsx)("div",{className:B.a.loader,children:"Loading..."})})},K=r(50),V=r.n(K),Z=function(){var e=Object(i.c)(p),t=Object(i.c)(l),r=Object(i.b)();return t?Object(h.jsx)(o.a,{to:"/"}):Object(h.jsx)("div",{className:V.a.wrapper,children:"loading"===e?Object(h.jsx)(D,{}):Object(h.jsx)("div",{children:Object(h.jsx)(I,{callback:function(e){var t=e.clientId,n=e.email,a=e.password;r(function(e,t,r){return function(){var n=Object(P.a)(N.a.mark((function n(a){var c;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(L("loading")),n.prev=1,n.next=4,U(e,t,r);case 4:if(200!==(c=n.sent).status){n.next=14;break}return localStorage.setItem("accessToken",c.data.data.accessToken),localStorage.setItem("refreshToken",c.data.data.refreshToken),n.next=10,a(H());case 10:return a(G(!0)),n.abrupt("return");case 14:return a(L("failed")),n.abrupt("return");case 16:n.next=20;break;case 18:n.prev=18,n.t0=n.catch(1);case 20:case"end":return n.stop()}}),n,null,[[1,18]])})));return function(e){return n.apply(this,arguments)}}()}(t,n,a))}})})})},M=r(17),q=r.n(M),Q=function(){var e=Object(i.c)(u),t=e.email,r=e.name,a=Object(i.c)(p),c=Object(i.c)(l),s=Object(i.b)();if(Object(n.useEffect)((function(){c&&s(H())}),[c,s]),!c)return Object(h.jsx)(o.a,{to:Y.LOGIN});return Object(h.jsx)("div",{className:q.a.wrapper,children:"loading"===a?Object(h.jsx)(D,{}):Object(h.jsxs)("div",{className:q.a.use_block,children:[Object(h.jsxs)("div",{className:q.a.user_info,children:[Object(h.jsx)("div",{className:q.a.info,children:t}),Object(h.jsx)("div",{className:q.a.info,children:r})]}),c&&Object(h.jsx)("div",{className:q.a.logout_btn_wrapper,children:Object(h.jsx)(x,{onClick:function(){s(function(){var e=Object(P.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(L("loading")),e.prev=1,e.next=4,C();case 4:200===e.sent.status&&(localStorage.clear(),t(G(!1)),t(L("succeeded"))),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())},className:q.a.logout_btn,children:"LOGOUT"})})]})})},J=r(37),W=r.n(J),Y={LOGIN:"/login",USER:"/user"},$=function(){var e=Object(i.c)(l),t=Object(i.b)();return Object(n.useEffect)((function(){localStorage.length&&t(G(!0))}),[e]),Object(h.jsx)("div",{className:W.a.app,children:Object(h.jsx)("div",{className:W.a.content,children:Object(h.jsxs)(o.d,{children:[Object(h.jsx)(o.b,{path:"/",exact:!0,render:function(){return Object(h.jsx)(o.a,{to:Y.USER})}}),Object(h.jsx)(o.b,{path:Y.LOGIN,exact:!0,render:function(){return Object(h.jsx)(Z,{})}}),Object(h.jsx)(o.b,{path:Y.USER,exact:!0,render:function(){return Object(h.jsx)(Q,{})}})]})})})},X=r(21),ee=r(20),te=r(51),re=Object(ee.c)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SP/APP/SET_STATUS":return Object(_.a)(Object(_.a)({},e),{},{status:t.status});case"SP/APP/SET_ERROR":return Object(_.a)(Object(_.a)({},e),{},{error:t.error});case"SP/APP/SET_INITIALIZE":return Object(_.a)(Object(_.a)({},e),{},{isInitialized:!0});default:return e}},authState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SP/AUTH/SET_IS_LOGGED":return Object(_.a)(Object(_.a)({},e),{},{isLoggedIn:t.value});case"SP/AUTH/SET_USER_DATA":return Object(_.a)(Object(_.a)({},e),{},{user:t.user});default:return e}}}),ne=Object(ee.d)(re,Object(ee.a)(te.a));r(81);c.a.render(Object(h.jsx)(X.a,{children:Object(h.jsx)(i.a,{store:ne,children:Object(h.jsx)($,{})})}),document.getElementById("root")),s()}},[[82,1,2]]]);
//# sourceMappingURL=main.6b15c25e.chunk.js.map