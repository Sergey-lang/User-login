{"version":3,"sources":["u-4-components/LoginForm/LoginForm.module.scss","u-3-pages/UserPage/UserPage.module.scss","u-4-components/Input/SuperInputText.module.css","u-4-components/Button/SuperButton.module.css","u-4-components/Preloader/Preloader.module.css","u-4-components/Error/Error.module.css","u-1-app/App.module.scss","u-3-pages/LoginPage/LoginPage.module.css","reportWebVitals.ts","u-3-pages/UserPage/selectors.ts","u-4-components/Input/SuperInputText.tsx","u-4-components/Button/SuperButton.tsx","u-4-components/LoginForm/LoginForm.tsx","u-1-app/app-reducer.ts","u-2-api/api.ts","u-2-api/auth-api.ts","u-3-pages/LoginPage/auth-reducer.ts","u-4-components/Preloader/Preloader.tsx","u-4-components/Error/Error.tsx","u-3-pages/LoginPage/LoginPage.tsx","u-3-pages/UserPage/UserPage.tsx","u-1-app/App.tsx","u-1-app/store.ts","index.tsx"],"names":["module","exports","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","selectorUserData","state","authState","user","selectorIsLogged","isLoggedIn","selectorRequestStatus","app","status","selectorAppError","error","SuperInputText","type","onChange","onChangeText","onKeyPress","onEnter","className","spanClassName","restProps","finalInputClassName","s","superInput","finalSpanClassName","input_wrapper","e","currentTarget","value","key","SuperButton","red","finalClassName","default","validate","values","errors","clientId","toString","length","email","test","password","LoginForm","callback","formik","useFormik","initialValues","onSubmit","setSubmitting","renderInput","id","name","placeholder","form_wrapper","header","form","handleSubmit","input","handleChange","form_btn_wrapper","form_btn","initializeState","isInitialized","setAppStatus","setAppError","axiosInstance","axios","create","withCredentials","baseURL","headers","Accept","interceptorsConfig","config","token","localStorage","getItem","Boolean","Authorization","interceptors","request","use","authAPI","post","res","get","setIsLoggedIn","getAuthUserData","dispatch","a","data","message","Preloader","preloader_wrapper","loader","Error","error_wrapper","LoginPage","useSelector","useDispatch","to","wrapper","setItem","accessToken","refreshToken","login","UserPage","useEffect","PATH","LOGIN","use_block","user_info","info","logout_btn_wrapper","onClick","clear","logout_btn","USER","App","content","path","exact","render","rootReducer","combineReducers","action","store","createStore","applyMiddleware","thunkMiddleware","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.f6c0e341.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"form_wrapper\":\"LoginForm_form_wrapper__2zl6s\",\"header\":\"LoginForm_header__jC63n\",\"form\":\"LoginForm_form__1pcpS\",\"input\":\"LoginForm_input__3kL8k\",\"form_btn_wrapper\":\"LoginForm_form_btn_wrapper__KVwxh\",\"form_btn\":\"LoginForm_form_btn__oVNS4\",\"input_label\":\"LoginForm_input_label__13BOd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"UserPage_wrapper__2mid2\",\"use_block\":\"UserPage_use_block__7HN15\",\"user_info\":\"UserPage_user_info__z4mtE\",\"info\":\"UserPage_info___jNbQ\",\"logout_btn_wrapper\":\"UserPage_logout_btn_wrapper__3p3nK\",\"logout_btn\":\"UserPage_logout_btn__3xjIW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input_wrapper\":\"SuperInputText_input_wrapper__3c1LH\",\"superInput\":\"SuperInputText_superInput__3Hv_Z\",\"errorInput\":\"SuperInputText_errorInput__1Vdvd\",\"error\":\"SuperInputText_error__3VwaK\",\"red\":\"SuperInputText_red__2rpZx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"default\":\"SuperButton_default__jvmih\",\"red\":\"SuperButton_red__Vh0YM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"preloader_wrapper\":\"Preloader_preloader_wrapper__H0b0v\",\"loader\":\"Preloader_loader__2bGH8\",\"load1\":\"Preloader_load1__3Uu_k\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"error_wrapper\":\"Error_error_wrapper__M1ZKT\",\"error\":\"Error_error__7H07g\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__3QElB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"LoginPage_wrapper__1HQt-\",\"headline\":\"LoginPage_headline__2a2ob\"};","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {AppStateType} from '../../u-1-app/store';\r\n\r\nexport const selectorUserData= (state: AppStateType) => state.authState.user\r\nexport const selectorIsLogged = (state: AppStateType) => state.authState.isLoggedIn\r\nexport const selectorRequestStatus= (state: AppStateType) => state.app.status\r\nexport const selectorAppError= (state: AppStateType) => state.app.error\r\n","import React, {ChangeEvent, DetailedHTMLProps, InputHTMLAttributes, KeyboardEvent} from 'react'\r\nimport s from './SuperInputText.module.css'\r\n\r\ntype DefaultInputPropsType = DetailedHTMLProps<InputHTMLAttributes<HTMLInputElement>, HTMLInputElement>;\r\n\r\ntype SuperInputTextPropsType = DefaultInputPropsType & {\r\n    onChangeText?: (value: string) => void\r\n    onEnter?: () => void\r\n    error?: string\r\n    spanClassName?: string\r\n};\r\n\r\nconst SuperInputText: React.FC<SuperInputTextPropsType> = (\r\n    {\r\n        type,\r\n        onChange, onChangeText,\r\n        onKeyPress, onEnter,\r\n        error,\r\n        className, spanClassName,\r\n\r\n        ...restProps\r\n    }\r\n) => {\r\n    const onChangeCallback = (e: ChangeEvent<HTMLInputElement>) => {\r\n        onChange\r\n        && onChange(e)\r\n\r\n        onChangeText && onChangeText(e.currentTarget.value)\r\n    }\r\n    const onKeyPressCallback = (e: KeyboardEvent<HTMLInputElement>) => {\r\n        onKeyPress && onKeyPress(e)\r\n\r\n        e.key === 'Enter'\r\n        && onEnter\r\n        && onEnter()\r\n    }\r\n\r\n    const finalInputClassName = error ? `${error} ${s.superInput} ` : s.superInput\r\n    const finalSpanClassName = `${s.error} ${spanClassName ? spanClassName : ''}`\r\n\r\n    return (\r\n\r\n        <div className={s.input_wrapper}>\r\n            <input\r\n                type={'text'}\r\n                onChange={onChangeCallback}\r\n                onKeyPress={onKeyPressCallback}\r\n                className={`${finalInputClassName} ${className}`}\r\n\r\n                {...restProps} // отдаём инпуту остальные пропсы если они есть (value например там внутри)\r\n            />\r\n            {error && <span className={finalSpanClassName}>{error}</span>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SuperInputText\r\n","import React, {ButtonHTMLAttributes, DetailedHTMLProps} from 'react';\r\nimport s from './SuperButton.module.css';\r\n\r\ntype DefaultButtonPropsType = DetailedHTMLProps<ButtonHTMLAttributes<HTMLButtonElement>, HTMLButtonElement>;\r\n\r\ntype SuperButtonPropsType = DefaultButtonPropsType & {\r\n    red?: boolean\r\n}\r\n\r\nconst SuperButton: React.FC<SuperButtonPropsType> = (\r\n    {\r\n        red, className,\r\n        ...restProps\r\n    }\r\n) => {\r\n    const finalClassName = red ? `${s.red} ${s.default}` : `${className} ${s.default}`;\r\n\r\n    return (\r\n        <button className={finalClassName}\r\n                {...restProps}\r\n        />\r\n    );\r\n}\r\n\r\nexport default SuperButton;\r\n","import React, {ChangeEvent} from 'react';\r\nimport {FormikErrors, useFormik} from 'formik';\r\nimport SuperInputText from '../Input/SuperInputText';\r\nimport SuperButton from '../Button/SuperButton';\r\n\r\nimport s from './LoginForm.module.scss'\r\n\r\nexport interface FormValues {\r\n    clientId: number,\r\n    email: string,\r\n    password: string,\r\n}\r\n\r\ninterface OtherProps {\r\n    callback: (value: FormValues) => void\r\n}\r\n\r\nconst validate = (values: FormValues) => {\r\n    let errors: FormikErrors<FormValues> = {};\r\n\r\n    if (!values.clientId) {\r\n        errors.clientId = 'Required';\r\n    } else if (values.clientId.toString().length === 0) {\r\n        errors.clientId = 'Must be 1 characters or more';\r\n    } else if (values.clientId.toString().length > 5) {\r\n        errors.clientId = 'Must be 10 characters or less';\r\n    }\r\n\r\n    if (!values.email) {\r\n        errors.email = 'Required';\r\n    } else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(values.email)) {\r\n        errors.email = 'Invalid email address';\r\n    }\r\n\r\n    if (!values.password) {\r\n        errors.password = 'Required';\r\n    } else if (values.password.length < 4) {\r\n        errors.password = 'Must be 4 characters or more';\r\n    } else if (values.password.length > 10) {\r\n        errors.password = 'Must be 10 characters or less';\r\n    }\r\n\r\n    return errors;\r\n}\r\n\r\nexport const LoginForm: React.FC<OtherProps> = ({callback}) => {\r\n\r\n    const formik = useFormik({\r\n        initialValues: {\r\n            clientId: 1,//\r\n            email: 'user@ozitag.com',//\r\n            password: 'user',//\r\n        },\r\n        validate,\r\n        onSubmit: (values,{ setSubmitting }) => {\r\n\r\n            callback(values)\r\n            setSubmitting(false)\r\n        },\r\n    });\r\n\r\n    const renderInput = (id: string, name: string, type: string, className: string, error: string | undefined, onChange: (e: ChangeEvent) => void, value: number | string, placeholder?:string) => {\r\n        return <SuperInputText\r\n            id={id}\r\n            name={name}\r\n            type={type}\r\n            className={className}\r\n            error={error}\r\n            onChange={onChange}\r\n            value={value}\r\n            placeholder={placeholder}\r\n        />\r\n    }\r\n\r\n    return (\r\n        <div className={s.form_wrapper}>\r\n            <div className={s.header}>\r\n                <h1>FLy&TAG</h1>\r\n            </div>\r\n            <div className={s.form}>\r\n                <p>Login into your account</p>\r\n                <form onSubmit={formik.handleSubmit}>\r\n\r\n                    {renderInput('clientId', 'clientId', 'text', s.input, formik.errors.clientId, formik.handleChange, formik.values.clientId, 'Enter ID')}\r\n\r\n                    {renderInput('email', 'email', 'text', s.input, formik.errors.email, formik.handleChange, formik.values.email, 'Enter Email')}\r\n\r\n                    {renderInput('password', 'password', 'text', s.input, formik.errors.password, formik.handleChange, formik.values.password, 'Enter Password')}\r\n\r\n                   <div className={s.form_btn_wrapper}>\r\n                       <SuperButton type=\"submit\" className={s.form_btn}>Log in</SuperButton>\r\n                   </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n\r\n\r\n\r\n","type ActionsType = ReturnType<typeof setAppStatus>\r\n    | ReturnType<typeof setAppError>\r\n    | ReturnType<typeof setAppStatus>\r\n    | ReturnType<typeof fulfilled>\r\n\r\nexport type RequestStatusType = 'idle' | 'loading' | 'succeeded' | 'failed'\r\nlet initializeState = {\r\n    status: 'idle',\r\n    error: null,\r\n    isInitialized: false\r\n} as InitialStateType\r\n\r\nexport type InitialStateType = {\r\n    status: RequestStatusType\r\n    error: string | null\r\n    isInitialized: boolean\r\n}\r\n\r\nexport const appReducer = (state: InitialStateType = initializeState, action: ActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'SP/APP/SET_STATUS':\r\n            return {...state, status: action.status}\r\n        case 'SP/APP/SET_ERROR':\r\n            return {...state, error: action.error}\r\n        case 'SP/APP/SET_INITIALIZE':\r\n            return {...state, isInitialized: true}\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport const setAppStatus = (status: RequestStatusType) => ({type: 'SP/APP/SET_STATUS', status} as const)\r\nexport const setAppError = (error: string | null) => ({type: 'SP/APP/SET_ERROR', error} as const)\r\nexport const fulfilled = () => ({type: 'SP/APP/SET_INITIALIZE'} as const)\r\n","import axios from 'axios'\r\n\r\nconst defaultOptions = {\r\n    withCredentials: false,\r\n    baseURL: 'https://tager.dev.ozitag.com',\r\n    headers: {\r\n        Accept: 'application/json',\r\n    }\r\n};\r\n\r\nexport const axiosInstance = axios.create(defaultOptions);\r\n\r\nconst interceptorConfigCreator = () => (config: any) => {\r\n    const token = localStorage.getItem('accessToken')\r\n    if (Boolean(token)) {\r\n        config.headers.Authorization = `Bearer ${token}`\r\n    } else {\r\n        delete config.headers.Authorization\r\n    }\r\n    return config\r\n}\r\n\r\nconst interceptorsConfig = interceptorConfigCreator()\r\naxiosInstance.interceptors.request.use(interceptorsConfig)\r\n","import {axiosInstance} from './api';\r\nimport {AxiosResponse} from 'axios';\r\n\r\nexport type UserType = {\r\n    name: string,\r\n    email: string,\r\n}\r\n\r\ntype LoginResponseType = {\r\n    tokenType: string,\r\n    expiresAt: string,\r\n    accessToken: string,\r\n    refreshToken: string\r\n}\r\n\r\nexport const authAPI = {\r\n    login(clientId: number, email: string, password: string) {\r\n        return axiosInstance.post<AxiosResponse<LoginResponseType>>(`/api/auth/user`, {clientId, email, password})\r\n            .then(res => res)\r\n    },\r\n    logout() {\r\n        return axiosInstance.post<{ success: boolean }>(`/api/tager/user/profile/logout`)\r\n            .then(res => res)\r\n    },\r\n    getUser() {\r\n        return axiosInstance.get<AxiosResponse<UserType>>(`/api/tager/user/profile`)\r\n            .then(res => res)\r\n    },\r\n}\r\n","import {ThunkDispatch} from 'redux-thunk';\r\nimport {setAppError, setAppStatus} from '../../u-1-app/app-reducer';\r\nimport {authAPI, UserType} from '../../u-2-api/auth-api';\r\nimport {AppStateType} from '../../u-1-app/store';\r\n\r\ntype ActionsType = ReturnType<typeof setAppStatus>\r\n    | ReturnType<typeof setIsLoggedIn>\r\n    | ReturnType<typeof setUserData>\r\n    | ReturnType<typeof setAppError>\r\n\r\nlet initializeState = {\r\n    isLoggedIn: false,\r\n    user: {} as UserType\r\n};\r\n\r\nexport type InitialStateType = typeof initializeState\r\nexport const authReducer = (state: InitialStateType = initializeState, action: ActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'SP/AUTH/SET_IS_LOGGED':\r\n            return {...state, isLoggedIn: action.value}\r\n        case 'SP/AUTH/SET_USER_DATA':\r\n            return {...state, user: action.user}\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport const setIsLoggedIn = (value: boolean) => ({type: 'SP/AUTH/SET_IS_LOGGED', value} as const)\r\nexport const setUserData = (user: UserType) => ({type: 'SP/AUTH/SET_USER_DATA', user} as const)\r\n\r\nexport const getAuthUserData = () => async (dispatch: ThunkDispatch<AppStateType, unknown, ActionsType>) => {\r\n    dispatch(setAppStatus('loading'))\r\n    try {\r\n        const res = await authAPI.getUser()\r\n        if (res.status === 200) {\r\n            dispatch(setUserData(res.data.data));\r\n            dispatch(setIsLoggedIn(true));\r\n            dispatch(setAppStatus('succeeded'));\r\n        } else {\r\n            dispatch(setAppStatus('failed'));\r\n        }\r\n    } catch (e) {\r\n        dispatch(setAppError(e.message))\r\n        dispatch(setAppStatus('failed'));\r\n    }\r\n};\r\n\r\nexport const login = (clientId: number, email: string, password: string) =>\r\n    async (dispatch: ThunkDispatch<AppStateType, unknown, ActionsType>) => {\r\n        dispatch(setAppStatus('loading'))\r\n        try {\r\n            const res = await authAPI.login(clientId, email, password)\r\n            if (res.status === 200) {\r\n                localStorage.setItem('accessToken', res.data.data.accessToken);\r\n                localStorage.setItem('refreshToken', res.data.data.refreshToken);\r\n                await dispatch(getAuthUserData());\r\n                dispatch(setIsLoggedIn(true));\r\n                dispatch(setAppError(''));\r\n                return\r\n            } else {\r\n                dispatch(setAppStatus('failed'));\r\n                return\r\n            }\r\n        } catch (e) {\r\n            dispatch(setAppError(e.message))\r\n            dispatch(setAppStatus('failed'));\r\n        }\r\n    };\r\n\r\nexport const logout = () => async (dispatch: ThunkDispatch<AppStateType, unknown, ActionsType>) => {\r\n    dispatch(setAppStatus('loading'))\r\n    try {\r\n        const res = await authAPI.logout()\r\n        if (res.status === 200) {\r\n            localStorage.clear()\r\n            dispatch(setIsLoggedIn(false))\r\n            dispatch(setAppError(''))\r\n            dispatch(setAppStatus('succeeded'));\r\n        }\r\n    } catch (e) {\r\n        dispatch(setAppError(e.message))\r\n        dispatch(setAppStatus('failed'));\r\n    }\r\n}\r\n\r\n","import React from 'react';\r\nimport s from './Preloader.module.css';\r\n\r\nconst Preloader: React.FC = () => {\r\n    return (\r\n        <div className={s.preloader_wrapper}>\r\n            <div className={s.loader}>Loading...</div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Preloader;\r\n","import React from 'react';\r\nimport s from './Error.module.css'\r\n\r\ntype PropsType = {\r\n    error: string\r\n}\r\n\r\nconst Error: React.FC<PropsType> = ({error}) => {\r\n    return (\r\n        <div className={s.error_wrapper}>\r\n            <div className={s.error}>{error ? error : ''}</div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Error;\r\n","import React from 'react';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport {selectorAppError, selectorIsLogged, selectorRequestStatus} from '../UserPage/selectors';\r\nimport {FormValues, LoginForm} from '../../u-4-components/LoginForm/LoginForm';\r\nimport {Redirect} from 'react-router-dom';\r\nimport {login} from './auth-reducer';\r\nimport Preloader from '../../u-4-components/Preloader/Preloader';\r\n\r\nimport s from './LoginPage.module.css'\r\nimport Error from '../../u-4-components/Error/Error';\r\n\r\nexport const LoginPage: React.FC = () => {\r\n    const status = useSelector(selectorRequestStatus)\r\n    const error = useSelector(selectorAppError)\r\n    const isLoggedIn = useSelector(selectorIsLogged)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const sentLoginData = (value: FormValues) => {\r\n        let {clientId, email, password} = value\r\n        dispatch(login(clientId, email, password))\r\n    }\r\n\r\n    if (isLoggedIn) {\r\n        return <Redirect to={'/'}/>\r\n    }\r\n\r\n    return (\r\n        <div className={s.wrapper}>\r\n            {status === 'loading'\r\n                ? <Preloader/>\r\n                : <div>\r\n                    <LoginForm callback={sentLoginData}/>\r\n                    {error && <Error error={error}/>}\r\n                </div>\r\n            }\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\n\r\n\r\n","import React, {useEffect} from 'react';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {getAuthUserData, logout} from '../LoginPage/auth-reducer';\nimport {selectorAppError, selectorIsLogged, selectorRequestStatus, selectorUserData} from './selectors';\nimport SuperButton from '../../u-4-components/Button/SuperButton';\nimport {Redirect} from 'react-router-dom';\nimport {PATH} from '../../u-1-app/App';\nimport Preloader from '../../u-4-components/Preloader/Preloader';\n\nimport s from './UserPage.module.scss'\nimport Error from '../../u-4-components/Error/Error';\n\nexport const UserPage: React.FC = () => {\n    const {email, name} = useSelector(selectorUserData)\n    const status = useSelector(selectorRequestStatus)\n    const error = useSelector(selectorAppError)\n    const isLoggedIn = useSelector(selectorIsLogged)\n\n    const dispatch = useDispatch()\n    useEffect(() => {\n        if (isLoggedIn)\n            dispatch(getAuthUserData())\n    }, [isLoggedIn, dispatch]);\n\n    if (!isLoggedIn) {\n        return <Redirect to={PATH.LOGIN}/>\n    }\n\n    const logoutHandler = () => {\n        dispatch(logout())\n    }\n\n    return (\n        <div className={s.wrapper}>\n            {status === 'loading'\n                ? <Preloader/>\n                : <div className={s.use_block}>\n                    <div className={s.user_info}>\n                        <div className={s.info}>{email}</div>\n                        <div className={s.info}>{name}</div>\n                    </div>\n                    {\n                        isLoggedIn && (\n                            <div className={s.logout_btn_wrapper}>\n                                <SuperButton onClick={logoutHandler} className={s.logout_btn}>LOGOUT</SuperButton>\n                            </div>)\n                    }\n                    {error && <Error error={error}/>}\n                </div>\n            }\n        </div>\n    );\n}\n\n","import React, {useEffect} from 'react';\nimport {Redirect, Route, Switch} from 'react-router-dom';\nimport {LoginPage} from '../u-3-pages/LoginPage/LoginPage';\nimport {UserPage} from '../u-3-pages/UserPage/UserPage';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {selectorIsLogged} from '../u-3-pages/UserPage/selectors';\nimport {setIsLoggedIn} from '../u-3-pages/LoginPage/auth-reducer';\n\nimport s from './App.module.scss'\n\nexport const PATH = {\n    LOGIN: '/login',\n    USER: '/user',\n}\n\nexport const App: React.FC = () => {\n\n    const isLoggedIn = useSelector(selectorIsLogged)\n\n    const dispatch = useDispatch()\n    useEffect(() => {\n        if (localStorage.length) {\n            dispatch(setIsLoggedIn(true))\n        }\n    }, [isLoggedIn])\n\n    return (\n        <div className={s.app}>\n            <div className={s.content}>\n                <Switch>\n                    <Route path=\"/\" exact render={() => <Redirect to={PATH.USER}/>}/>\n                    <Route path={PATH.LOGIN} exact render={() => <LoginPage/>}/>\n                    <Route path={PATH.USER} exact render={() => <UserPage/>}/>\n                </Switch>\n            </div>\n        </div>\n    );\n}\n","import {applyMiddleware, combineReducers, createStore} from 'redux'\r\nimport thunkMiddleware from 'redux-thunk'\r\nimport {appReducer} from './app-reducer';\r\nimport {authReducer} from '../u-3-pages/LoginPage/auth-reducer';\r\n\r\nexport const rootReducer = combineReducers({\r\n    app: appReducer,\r\n    authState: authReducer,\r\n})\r\n\r\nexport type AppStateType = ReturnType<typeof rootReducer>\r\nexport let store = createStore(rootReducer, applyMiddleware(thunkMiddleware))\r\n\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport reportWebVitals from './reportWebVitals';\nimport {App} from './u-1-app/App';\nimport {HashRouter} from 'react-router-dom';\nimport {Provider} from 'react-redux';\nimport {store} from './u-1-app/store';\n\nimport './index.css';\n\nReactDOM.render(\n    <HashRouter>\n        <Provider store={store}>\n            <App/>\n        </Provider>\n    </HashRouter>,\n    document.getElementById('root')\n);\n\nreportWebVitals();\n"],"sourceRoot":""}