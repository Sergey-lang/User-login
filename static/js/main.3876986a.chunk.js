(this.webpackJsonpuser_login=this.webpackJsonpuser_login||[]).push([[0],{13:function(e,t,r){e.exports={form_wrapper:"LoginForm_form_wrapper__pGOfB",headline:"LoginForm_headline__2h6zG",headline_text:"LoginForm_headline_text__3P2SJ",form:"LoginForm_form__1fO7N",form_description:"LoginForm_form_description__3_J1H",input:"LoginForm_input__1Q8lM",form_btn_wrapper:"LoginForm_form_btn_wrapper__3dYj1",form_btn:"LoginForm_form_btn__2dWXE"}},17:function(e,t,r){e.exports={wrapper:"UserPage_wrapper__2w2tX",user_block:"UserPage_user_block__FDzPM",user_info:"UserPage_user_info__2Y9hX",info:"UserPage_info__1cwiM",logout_btn_wrapper:"UserPage_logout_btn_wrapper__2HSmw",logout_btn:"UserPage_logout_btn__1R2hb"}},21:function(e,t,r){e.exports={input_wrapper:"Input_input_wrapper__3SILz",superInput:"Input_superInput__1e-HN",spanError:"Input_spanError__2iBy1"}},30:function(e,t,r){e.exports={default:"Button_default__1hRgZ",red:"Button_red__3s2rr"}},34:function(e,t,r){e.exports={error_wrapper:"Error_error_wrapper__2sxLv",error:"Error_error__3M_SG"}},35:function(e,t,r){e.exports={preloader_wrapper:"Preloader_preloader_wrapper__2pGBo",loader:"Preloader_loader__uQ0yN",load1:"Preloader_load1__1nb2L"}},38:function(e,t,r){e.exports={app:"App_app__218_m"}},51:function(e,t,r){e.exports={wrapper:"LoginPage_wrapper__1qGss",headline:"LoginPage_headline__2cWzL"}},82:function(e,t,r){},83:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(24),s=r.n(c),o=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,84)).then((function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),a(e),n(e),c(e),s(e)}))},i=r(3),u=r(5),l=function(e){return e.authState.user},p=function(e){return e.authState.isLoggedIn},d=function(e){return e.appState.status},_=function(e){return e.appState.error},j=r(18),b=r.n(j),m=r(29),f=r(7),h={status:"idle",error:null},O=function(e){return{type:"SP/APP/SET_STATUS",status:e}},g=function(e){return{type:"SP/APP/SET_ERROR",error:e}},x=r(48),v=r.n(x).a.create({withCredentials:!1,baseURL:"https://tager.dev.ozitag.com",headers:{Accept:"application/json"}}),w=function(e){var t=localStorage.getItem("accessToken");return Boolean(t)?e.headers.Authorization="Bearer ".concat(t):delete e.headers.Authorization,e};v.interceptors.request.use(w);var S=function(e,t,r){return v.post("/api/auth/user",{clientId:e,email:t,password:r}).then((function(e){return e}))},I=function(){return v.post("/api/tager/user/profile/logout").then((function(e){return e}))},N=function(){return v.get("/api/tager/user/profile").then((function(e){return e}))},E={isLoggedIn:!1,user:{}},P=function(e){return{type:"SP/AUTH/SET_IS_LOGGED",value:e}},T=function(){return function(){var e=Object(m.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(O("loading")),e.prev=1,e.next=4,N();case 4:r=e.sent,t({type:"SP/AUTH/SET_USER_DATA",user:r.data.data}),t(P(!0)),t(O("succeeded")),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),t(g(e.t0.message)),t(O("failed"));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},L=r(53),k=r(28),y=r(21),A=r.n(y),U=r(1),C=function(e){e.type;var t=e.onChange,r=e.onChangeText,a=e.onKeyPress,n=e.onEnter,c=e.error,s=e.className,o=e.spanClassName,i=Object(k.a)(e,["type","onChange","onChangeText","onKeyPress","onEnter","error","className","spanClassName"]),u=s?"".concat(A.a.superInput," ").concat(s):A.a.superInput,l=o?"".concat(A.a.spanError," ").concat(o):A.a.spanError;return Object(U.jsxs)("div",{className:A.a.input_wrapper,children:[Object(U.jsx)("input",Object(f.a)({type:"text",onChange:function(e){t&&t(e),r&&r(e.currentTarget.value)},onKeyPress:function(e){a&&a(e),"Enter"===e.key&&n&&n()},className:u},i)),c&&Object(U.jsx)("span",{className:l,children:c})]})},R=r(30),F=r.n(R),G=n.a.memo((function(e){var t=e.red,r=e.className,a=Object(k.a)(e,["red","className"]),n=t?"".concat(F.a.red," ").concat(F.a.default):"".concat(r," ").concat(F.a.default);return Object(U.jsx)("button",Object(f.a)({className:n},a))})),B=r(13),z=r.n(B),M=function(e){var t={};return e.clientId?0===e.clientId.toString().length?t.clientId="Must be 1 characters or more":e.clientId.toString().length>5&&(t.clientId="Must be 10 characters or less"):t.clientId="Required",e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password?e.password.length<4?t.password="Must be 4 characters or more":e.password.length>10&&(t.password="Must be 10 characters or less"):t.password="Required",t},D=n.a.memo((function(e){var t=e.callback,r=Object(L.a)({initialValues:{clientId:1,email:"user@ozitag.com",password:"user"},validate:M,onSubmit:function(e,r){var a=r.setSubmitting;t(e),a(!1)}}),a=function(e,t,r,a,n,c,s,o){return Object(U.jsx)(C,{id:e,name:t,type:r,className:a,error:n,onChange:c,value:s,placeholder:o})};return Object(U.jsxs)("div",{className:z.a.form_wrapper,children:[Object(U.jsx)("div",{className:z.a.headline,children:Object(U.jsx)("h1",{className:z.a.headline_text,children:"FLy&TAG"})}),Object(U.jsxs)("div",{className:z.a.form,children:[Object(U.jsx)("p",{className:z.a.form_description,children:"Login into your account"}),Object(U.jsxs)("form",{onSubmit:r.handleSubmit,children:[a("clientId","clientId","text",z.a.input,r.errors.clientId,r.handleChange,r.values.clientId,"Enter ID"),a("email","email","text",z.a.input,r.errors.email,r.handleChange,r.values.email,"Enter Email"),a("password","password","text",z.a.input,r.errors.password,r.handleChange,r.values.password,"Enter Password"),Object(U.jsx)("div",{className:z.a.form_btn_wrapper,children:Object(U.jsx)(G,{type:"submit",className:z.a.form_btn,children:"Log in"})})]})]})]})})),H=r(34),q=r.n(H),J=n.a.memo((function(e){var t=e.error;return Object(U.jsx)("div",{className:q.a.error_wrapper,children:Object(U.jsx)("div",{className:q.a.error,children:t||""})})})),Z=r(35),K=r.n(Z),X=n.a.memo((function(){return Object(U.jsx)("div",{className:K.a.preloader_wrapper,children:Object(U.jsx)("div",{className:K.a.loader,children:"Loading..."})})})),Q=r(51),W=r.n(Q),Y=n.a.memo((function(){var e=Object(u.c)(d),t=Object(u.c)(_),r=Object(u.c)(p),n=Object(u.b)(),c=Object(a.useCallback)((function(e){var t=e.clientId,r=e.email,a=e.password;n(function(e,t,r){return function(){var a=Object(m.a)(b.a.mark((function a(n){var c;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(O("loading")),a.prev=1,a.next=4,S(e,t,r);case 4:c=a.sent,localStorage.setItem("accessToken",c.data.data.accessToken),localStorage.setItem("refreshToken",c.data.data.refreshToken),n(P(!0)),n(g("")),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(1),n(g(a.t0.message)),n(O("failed"));case 15:case"end":return a.stop()}}),a,null,[[1,11]])})));return function(e){return a.apply(this,arguments)}}()}(t,r,a))}),[]);return r?Object(U.jsx)(i.a,{to:ae.USER}):Object(U.jsx)("div",{className:W.a.wrapper,children:"loading"===e?Object(U.jsx)(X,{}):Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(D,{callback:c}),t&&Object(U.jsx)(J,{error:t})]})})})),V=r(17),$=r.n(V),ee=n.a.memo((function(){var e=Object(u.c)(l),t=e.email,r=e.name,n=Object(u.c)(d),c=Object(u.c)(_),s=Object(u.c)(p),o=Object(a.useCallback)((function(){j(function(){var e=Object(m.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(O("loading")),e.prev=1,e.next=4,I();case 4:localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),t(O("succeeded")),t(P(!1)),t(g("")),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),t(g(e.t0.message)),t(O("failed"));case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}())}),[]),j=Object(u.b)();return Object(a.useEffect)((function(){j(T())}),[]),s?Object(U.jsx)("div",{className:$.a.wrapper,children:"loading"===n?Object(U.jsx)(X,{}):Object(U.jsxs)("div",{className:$.a.user_block,children:[Object(U.jsxs)("div",{className:$.a.user_info,children:[Object(U.jsx)("div",{className:$.a.info,children:t}),Object(U.jsx)("div",{className:$.a.info,children:r})]}),s&&Object(U.jsx)("div",{className:$.a.logout_btn_wrapper,children:Object(U.jsx)(G,{onClick:o,className:$.a.logout_btn,children:"LOGOUT"})}),c&&Object(U.jsx)(J,{error:c})]})}):Object(U.jsx)(i.a,{to:ae.LOGIN})})),te=r(38),re=r.n(te),ae={LOGIN:"/login",USER:"/user"},ne=function(){var e=Object(u.b)();return Object(a.useEffect)((function(){localStorage.getItem("accessToken")&&e(T())}),[]),Object(U.jsx)("div",{className:re.a.app,children:Object(U.jsx)("div",{className:re.a.content,children:Object(U.jsxs)(i.d,{children:[Object(U.jsx)(i.b,{path:"/",exact:!0,render:function(){return Object(U.jsx)(i.a,{to:ae.USER})}}),Object(U.jsx)(i.b,{path:ae.LOGIN,exact:!0,render:function(){return Object(U.jsx)(Y,{})}}),Object(U.jsx)(i.b,{path:ae.USER,exact:!0,render:function(){return Object(U.jsx)(ee,{})}})]})})})},ce=r(22),se=r(20),oe=r(52),ie=Object(se.c)({appState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SP/APP/SET_STATUS":return Object(f.a)(Object(f.a)({},e),{},{status:t.status});case"SP/APP/SET_ERROR":return Object(f.a)(Object(f.a)({},e),{},{error:t.error});default:return e}},authState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SP/AUTH/SET_IS_LOGGED":return Object(f.a)(Object(f.a)({},e),{},{isLoggedIn:t.value});case"SP/AUTH/SET_USER_DATA":return Object(f.a)(Object(f.a)({},e),{},{user:t.user});default:return e}}}),ue=Object(se.d)(ie,Object(se.a)(oe.a));r(82);s.a.render(Object(U.jsx)(ce.a,{children:Object(U.jsx)(u.a,{store:ue,children:Object(U.jsx)(ne,{})})}),document.getElementById("root")),o()}},[[83,1,2]]]);
//# sourceMappingURL=main.3876986a.chunk.js.map